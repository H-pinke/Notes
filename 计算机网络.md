##### UDP简介

UDP是一个简单的传输层协议。和TCP相比，UDP有下面几个显著特点：

- UDP缺乏**可靠性**。UDP本身不提供**确认，序列号，超时重传**等机制。UDP数据报可能在网络中被复制，被重新排序。即UDP不保证会达到其最终目的地，也不保证各个数据报的先后顺序，也不保证每个数据报只能到达一次。
- UDP数据报是有**长度的**。每个UDP数据报都有长度，如果一个数据报正确地达到目的地，那么数据报的长度将随数据一起传递给接收方。而TCP是一个字节流协议，没有任何（协议上的）记录边界
- UDP是无连接的。UDP客户端和服务器之间不必存在长期的关系。UDP发送数据报之前也不需要经过握手创建连接的过程
- UDP支持多播和广播

##### TCP的特征

- TCP提供一种**面向连接**的，可靠的字节流服务
- 在一个TCP连接中，仅有两方进行彼此通信。广播和多播不能用于TCP
- TCP使用**校验和**，**确认和重传机制**来保障可靠传输
- TCP给**数据分节**进行排序，并使用累积确认保证数据的顺序不变和非重复
- TCP使用滑动窗口机制来现实流量控制，通过动态改变窗口的大小进行拥塞控制。

##### 三次握手

所谓3次握手，是指建立一个TCP连接时，需要客户端和服务器总共发送3个包。三次握手的目的是连接服务器指定端口，建立TCP 连接，并同步连接双方的序列号和确认号，交换TCP窗口的大小信息。在socket中执行 connect()时，触发3次握手。

- 第一次握手（SYN = 1 seq = x）

    客户端发送一个TCP的SYN 标志位置1的包，指明客户端打算连接的服务器的端口，以及初始序号X ，保存在包头的序列号字段里。发送完毕后，客户端进入 SYN_SEND（同步已发送） 状态

- 第二次握手（SYN =1 ACK= 1 seq = y, ACKnum = x+1）

    服务器发回确认包 ACK 应答。即SYN 标志位和ACK 标志位均为1.服务器端选择自己ISN 序列号放到seq域里，同时将确认序号 设置为客户端 ISN加1，即x+1. 发送完毕后，服务器端进入SYN_RCVD（同步收到）状态

- 弟三次握手（ACK= 1 ACKnum=y+1）

    客户端再次发送确认包（ACK）SYN标志位为0，ACK标志位为1，并且把服务器发来ACK的序号字段 + 1，放在确定字段中发送给对方，并且在数据段ISN的+1，发送完毕后，客户端进入ESTABLISHED（已建立连接）状态，当服务器端接收到这个包时，也进入 ESTABLISHED 状态，TCP握手结束。























