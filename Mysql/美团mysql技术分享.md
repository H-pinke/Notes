## 背景

我们知道一般的应用系统，读写比例在 10:1 左右，而且插入操作和一般的更新操作很少出现性能问题，遇到最多的，也是最容易出问题的，还是一些复杂的查询操作，所以查询语句优化显然是重中之重。



## 索引原理

数据库应该选择怎么样的方式来应对所有的问题呢？我们回想字典的例子，能不能把数据分成段，然后分段查询呢？最简单的如果1000条数据，1到100分成第一段，101到200分成第二段，201到300分成第三段。。。。。这样查询250条数据，只要找第三段就可以了，一下子去除了90%的无效数据。

## 磁盘IO与预读

磁盘读取数据靠的是机械运动，每次读取数据花费的时间可以分为 寻道时间、旋转时间、传输时间3个部分。

- 寻道时间：指的是磁臂移动到指定磁道所需要的时间，主流磁盘一般在5ms以下；
- 旋转延迟：就是我们经常听说的磁盘转速。

比如：一个磁盘7200转，表示每分钟能转7200次，也就是说1秒钟能转120次，旋转延迟就是 1/120/2 = 4.17ms; 

- 传输时间：指的是从磁盘读出或将数据写入磁盘的时间，一般在零点几毫秒，相对于前两个时间可以忽略不计。

那么访问一次磁盘时间，即一次IO的时间约等于 5+4.17=9ms. 要是一次IO执行40W条指令，数据库动辄十万百万千万的数据，每次9秒时间，显然是个灾难。